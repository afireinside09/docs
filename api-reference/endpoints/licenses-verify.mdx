---
title: "Verify License"
api: "GET /licenses/verify"
description: "Verify license and seat access for external services"
---

## Overview

This endpoint is used by the Google Sheets add-on to verify that a user has a valid license and seat before allowing AI function execution.

## Request

<ParamField header="x-license-secret" type="string" required>
  Server-to-server authentication secret
</ParamField>

<ParamField query="email" type="string" required>
  User's email address
</ParamField>

<ParamField query="license_key" type="string" required>
  License key to verify
</ParamField>

## Response

<ResponseField name="result" type="object">
  <Expandable title="properties">
    <ResponseField name="valid" type="boolean">
      Whether access is granted
    </ResponseField>
    <ResponseField name="license" type="object">
      License details (if found)
    </ResponseField>
    <ResponseField name="seat" type="object">
      Seat details (if found)
    </ResponseField>
    <ResponseField name="message" type="string">
      Human-readable status message
    </ResponseField>
  </Expandable>
</ResponseField>

## Example

<CodeGroup>
```bash cURL
curl -X GET "https://api.sheetmagic.ai/licenses/verify?email=user@example.com&license_key=SM-XXXX-XXXX-XXXX" \
  -H "x-license-secret: <secret>" \
  -H "Content-Type: application/json"
```

```javascript JavaScript
const response = await fetch(
  'https://api.sheetmagic.ai/licenses/verify?email=user@example.com&license_key=SM-XXXX-XXXX-XXXX',
  {
    headers: {
      'x-license-secret': '<secret>',
      'Content-Type': 'application/json'
    }
  }
);
const data = await response.json();
```
</CodeGroup>

## Success Response

```json
{
  "result": {
    "valid": true,
    "license": {
      "id": "123e4567-e89b-12d3-a456-426614174000",
      "status": "active",
      "type": "pro",
      "duration": "1_year",
      "expires_at": "2025-12-04T00:00:00Z",
      "seat_count": 5
    },
    "seat": {
      "id": "456e7890-a12b-34c5-d678-901234567890",
      "email": "user@example.com",
      "status": "active",
      "created_at": "2024-06-01T00:00:00Z"
    },
    "message": "License and seat are valid"
  }
}
```

## Failure Responses

### License Not Found

```json
{
  "result": {
    "valid": false,
    "license": null,
    "seat": null,
    "message": "License not found"
  }
}
```

### License Not Active

```json
{
  "result": {
    "valid": false,
    "license": {
      "id": "...",
      "status": "cancelled",
      ...
    },
    "seat": null,
    "message": "License is not active"
  }
}
```

### License Expired

```json
{
  "result": {
    "valid": false,
    "license": {
      "id": "...",
      "status": "active",
      "expires_at": "2024-01-01T00:00:00Z",
      ...
    },
    "seat": null,
    "message": "License has expired"
  }
}
```

### No Seat

```json
{
  "result": {
    "valid": false,
    "license": { ... },
    "seat": null,
    "message": "Email does not have a seat on this license"
  }
}
```

### Seat Revoked

```json
{
  "result": {
    "valid": false,
    "license": { ... },
    "seat": {
      "status": "revoked",
      ...
    },
    "message": "Seat has been revoked"
  }
}
```

## Rate Limiting

This endpoint has stricter rate limits:
- 20 requests per minute per IP

## Errors

| Status | Description |
|--------|-------------|
| 400 | Missing email or license_key |
| 401 | Invalid license secret |
| 500 | Server error |
